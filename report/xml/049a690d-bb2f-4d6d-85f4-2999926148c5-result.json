{"name": "test_api[case_data8]", "status": "broken", "statusDetails": {"message": "TypeError: a bytes-like object is required, not 'float'", "trace": "self = <case.test_allocation.TestCase object at 0x1064fcda0>\ncase_data = {'APIName': '查询调拨出库订单详情', 'CaseId': 9.0, 'CaseName': 'get_transfer-out-bills', 'CheckTpye': 'check_json', ...}\n\n    @pytest.mark.parametrize('case_data', case_dict, ids=[])\n    @allure.story(\"调拨模块测试\")\n    @pytest.mark.flaky(reruns=3, reruns_delay=3)\n    def test_api(self, case_data):\n        '''\n        :param case_data: 测试用例\n        :return:\n        '''\n        code, response = h.send_requests(case_data)\n>       result = checkResult.check_result(case_data, code, response)\n\ntest_allocation.py:51: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n../util/checkResult.py:81: in check_result\n    allure.attach(case['ExpectedCode'],'预期code')\n../venv/bin/python/lib/python3.6/site-packages/allure_commons/_allure.py:164: in __call__\n    plugin_manager.hook.attach_data(body=body, name=name, attachment_type=attachment_type, extension=extension)\n../venv/bin/python/lib/python3.6/site-packages/pluggy/hooks.py:286: in __call__\n    return self._hookexec(self, self.get_hookimpls(), kwargs)\n../venv/bin/python/lib/python3.6/site-packages/pluggy/manager.py:93: in _hookexec\n    return self._inner_hookexec(hook, methods, kwargs)\n../venv/bin/python/lib/python3.6/site-packages/pluggy/manager.py:87: in <lambda>\n    firstresult=hook.spec.opts.get(\"firstresult\") if hook.spec else False,\n../venv/bin/python/lib/python3.6/site-packages/allure_pytest/listener.py:215: in attach_data\n    self.allure_logger.attach_data(uuid4(), body, name=name, attachment_type=attachment_type, extension=extension)\n../venv/bin/python/lib/python3.6/site-packages/allure_commons/reporter.py:117: in attach_data\n    plugin_manager.hook.report_attached_data(body=body, file_name=file_name)\n../venv/bin/python/lib/python3.6/site-packages/pluggy/hooks.py:286: in __call__\n    return self._hookexec(self, self.get_hookimpls(), kwargs)\n../venv/bin/python/lib/python3.6/site-packages/pluggy/manager.py:93: in _hookexec\n    return self._inner_hookexec(hook, methods, kwargs)\n../venv/bin/python/lib/python3.6/site-packages/pluggy/manager.py:87: in <lambda>\n    firstresult=hook.spec.opts.get(\"firstresult\") if hook.spec else False,\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <allure_commons.logger.AllureFileLogger object at 0x105a30630>\nbody = 200.0\nfile_name = '9eaa2e4b-dccd-4525-afcf-87d385a3480d-attachment.attach'\n\n    @hookimpl\n    def report_attached_data(self, body, file_name):\n        destination = os.path.join(self._report_dir, file_name)\n        with open(destination, 'wb') as attached_file:\n            if isinstance(body, text_type):\n                attached_file.write(body.encode('utf-8'))\n            else:\n>               attached_file.write(body)\nE               TypeError: a bytes-like object is required, not 'float'\n\n../venv/bin/python/lib/python3.6/site-packages/allure_commons/logger.py:62: TypeError"}, "description": "\n        :param case_data: 测试用例\n        :return:\n        ", "steps": [{"name": "开始请求接口", "status": "passed", "attachments": [{"name": "请求类型", "source": "0b06af96-0a8b-4b32-b1f5-550956a2eed2-attachment.attach"}, {"name": "用例名称:", "source": "0e63d787-c405-410e-b336-acd14d1edefd-attachment.attach"}, {"name": "请求地址:", "source": "ba5a2387-6a9d-41e8-97fb-6be6a7a780b1-attachment.attach"}, {"name": "请求头", "source": "b7752dfd-51ae-4e20-9264-cc5dc64e0e11-attachment.attach"}, {"name": "请求参数类型", "source": "0068ec4d-fbc9-4ce2-9f93-885e72bcdfec-attachment.attach"}, {"name": "请求参数", "source": "2be61352-2ac5-4f77-85b4-81c0cad4423c-attachment.attach"}], "start": 1589351935669, "stop": 1589351935672}, {"name": "开始请求接口", "status": "passed", "attachments": [{"name": "请求类型", "source": "eae658b0-76f5-49b0-b611-75fd0180b2d6-attachment.attach"}, {"name": "用例名称:", "source": "71be37b8-cc47-4994-a2a9-4771062e9725-attachment.attach"}, {"name": "请求地址:", "source": "9ab4c809-ab35-4212-a3e1-8fef250cbbfe-attachment.attach"}, {"name": "请求头", "source": "445a5b1b-6b21-4563-93ce-630bb7f2460d-attachment.attach"}, {"name": "请求参数类型", "source": "2bbf337c-fc09-4941-90d6-848874929c23-attachment.attach"}, {"name": "请求参数", "source": "e876989f-14c8-4383-9243-4f68ce86272b-attachment.attach"}], "start": 1589351939654, "stop": 1589351939656}, {"name": "开始请求接口", "status": "passed", "attachments": [{"name": "请求类型", "source": "a548d88e-07ae-4c24-8c71-4909237c266f-attachment.attach"}, {"name": "用例名称:", "source": "cb59982e-3d64-46f1-84aa-53ad58103bfb-attachment.attach"}, {"name": "请求地址:", "source": "bb516bf1-0ad5-4f6f-8b3e-4c0813961eb5-attachment.attach"}, {"name": "请求头", "source": "8dbea141-6bea-40d3-999f-ee4610714c7c-attachment.attach"}, {"name": "请求参数类型", "source": "b0ce290d-efea-4aae-8790-3f6ac993c8a4-attachment.attach"}, {"name": "请求参数", "source": "9b4e607a-1631-47fc-bee7-bdbeca5d04f6-attachment.attach"}], "start": 1589351940270, "stop": 1589351940272}, {"name": "开始请求接口", "status": "passed", "attachments": [{"name": "请求类型", "source": "35cd83df-ace7-4a1f-b938-3583b066864d-attachment.attach"}, {"name": "用例名称:", "source": "85051822-75d3-4c07-b6d0-23720d43e7c2-attachment.attach"}, {"name": "请求地址:", "source": "bb6fbef4-1f15-4ef9-89c9-412244ef288d-attachment.attach"}, {"name": "请求头", "source": "667ce7c8-063f-4dc5-9a4d-52968b6cbe14-attachment.attach"}, {"name": "请求参数类型", "source": "5c9e3a31-041d-43a8-89cb-da8f953ab88b-attachment.attach"}, {"name": "请求参数", "source": "2b8f638c-69d8-4228-b0bb-1099b69543b2-attachment.attach"}], "start": 1589351942218, "stop": 1589351942220}, {"name": "开始请求接口", "status": "passed", "attachments": [{"name": "请求类型", "source": "a9aba53e-107d-42b6-a63a-58ae844b1915-attachment.attach"}, {"name": "用例名称:", "source": "c9575142-2b72-4489-870f-9a9a602e204d-attachment.attach"}, {"name": "请求地址:", "source": "272a0b33-4471-46ea-b65e-3a74c823a8b2-attachment.attach"}, {"name": "请求头", "source": "73d08399-6ece-4da0-af49-c79742c11344-attachment.attach"}, {"name": "请求参数类型", "source": "d67383ea-06d9-4505-951b-f2cb71649281-attachment.attach"}, {"name": "请求参数", "source": "a401ce22-5965-483a-89f4-8c1df1b23a5f-attachment.attach"}], "start": 1589351946618, "stop": 1589351946620}, {"name": "校验返回json数据结构", "status": "broken", "statusDetails": {"message": "TypeError: a bytes-like object is required, not 'float'\n", "trace": "  File \"/Users/xmly/python/AutoTest/util/checkResult.py\", line 81, in check_result\n    allure.attach(case['ExpectedCode'],'预期code')\n  File \"/Users/xmly/python/AutoTest/venv/bin/python/lib/python3.6/site-packages/allure_commons/_allure.py\", line 164, in __call__\n    plugin_manager.hook.attach_data(body=body, name=name, attachment_type=attachment_type, extension=extension)\n  File \"/Users/xmly/python/AutoTest/venv/bin/python/lib/python3.6/site-packages/pluggy/hooks.py\", line 286, in __call__\n    return self._hookexec(self, self.get_hookimpls(), kwargs)\n  File \"/Users/xmly/python/AutoTest/venv/bin/python/lib/python3.6/site-packages/pluggy/manager.py\", line 93, in _hookexec\n    return self._inner_hookexec(hook, methods, kwargs)\n  File \"/Users/xmly/python/AutoTest/venv/bin/python/lib/python3.6/site-packages/pluggy/manager.py\", line 87, in <lambda>\n    firstresult=hook.spec.opts.get(\"firstresult\") if hook.spec else False,\n  File \"/Users/xmly/python/AutoTest/venv/bin/python/lib/python3.6/site-packages/pluggy/callers.py\", line 208, in _multicall\n    return outcome.get_result()\n  File \"/Users/xmly/python/AutoTest/venv/bin/python/lib/python3.6/site-packages/pluggy/callers.py\", line 80, in get_result\n    raise ex[1].with_traceback(ex[2])\n  File \"/Users/xmly/python/AutoTest/venv/bin/python/lib/python3.6/site-packages/pluggy/callers.py\", line 187, in _multicall\n    res = hook_impl.function(*args)\n  File \"/Users/xmly/python/AutoTest/venv/bin/python/lib/python3.6/site-packages/allure_pytest/listener.py\", line 215, in attach_data\n    self.allure_logger.attach_data(uuid4(), body, name=name, attachment_type=attachment_type, extension=extension)\n  File \"/Users/xmly/python/AutoTest/venv/bin/python/lib/python3.6/site-packages/allure_commons/reporter.py\", line 117, in attach_data\n    plugin_manager.hook.report_attached_data(body=body, file_name=file_name)\n  File \"/Users/xmly/python/AutoTest/venv/bin/python/lib/python3.6/site-packages/pluggy/hooks.py\", line 286, in __call__\n    return self._hookexec(self, self.get_hookimpls(), kwargs)\n  File \"/Users/xmly/python/AutoTest/venv/bin/python/lib/python3.6/site-packages/pluggy/manager.py\", line 93, in _hookexec\n    return self._inner_hookexec(hook, methods, kwargs)\n  File \"/Users/xmly/python/AutoTest/venv/bin/python/lib/python3.6/site-packages/pluggy/manager.py\", line 87, in <lambda>\n    firstresult=hook.spec.opts.get(\"firstresult\") if hook.spec else False,\n  File \"/Users/xmly/python/AutoTest/venv/bin/python/lib/python3.6/site-packages/pluggy/callers.py\", line 208, in _multicall\n    return outcome.get_result()\n  File \"/Users/xmly/python/AutoTest/venv/bin/python/lib/python3.6/site-packages/pluggy/callers.py\", line 80, in get_result\n    raise ex[1].with_traceback(ex[2])\n  File \"/Users/xmly/python/AutoTest/venv/bin/python/lib/python3.6/site-packages/pluggy/callers.py\", line 187, in _multicall\n    res = hook_impl.function(*args)\n  File \"/Users/xmly/python/AutoTest/venv/bin/python/lib/python3.6/site-packages/allure_commons/logger.py\", line 62, in report_attached_data\n    attached_file.write(body)\n"}, "attachments": [{"name": "预期code", "source": "9eaa2e4b-dccd-4525-afcf-87d385a3480d-attachment.attach"}], "start": 1589351946921, "stop": 1589351946922}], "attachments": [{"name": "log", "source": "059ca88b-7106-4604-8e40-d3e13fd47b54-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "case_data", "value": "{'CaseId': 9.0, 'CaseName': 'get_transfer-out-bills', 'APIName': '查询调拨出库订单详情', 'Headers': '', 'Path': '/occ-stock/stock/transfer-out-bills/findByParentid', 'Method': 'get', 'ParameterType': 'parameter', 'Params': '{\"id\":\"create-transfer-out1\",\"search_AUTH_APPCODE\":\"transferOutBill\"}', 'CheckTpye': 'check_json', 'ExpectedCode': 200.0, 'ExpectedData': '{\"id\":\"09hvzd0ZYcNlm2Acrklt\",\"dr\":0,\"ts\":1587882709000,\"creator\":\"tmq\",\"creationTime\":1587882670000,\"modifier\":\"tmq\",\"modifiedTime\":1587882709000,\"persistStatus\":\"nrm\",\"promptMessage\":null,\"stockOrgId\":\"e53fc87e-1a16-4a2b-978c-63bfd14fd88b\",\"stockOrgCode\":\"1101\",\"stockOrgName\":\"上海证大喜马拉雅网络科技有限公司\",\"stockOrgInId\":\"abd7cf79-511d-4307-9bbd-d288b18d0ef9\",\"stockOrgInCode\":\"1210\",\"stockOrgInName\":\"西安喜马拉雅网络科技有限公司\",\"billCode\":\"TDN2020042600004\",\"billDate\":1587830400000,\"billType\":\"AllocationOut\",\"billTranTypeId\":\"AllocationOut\",\"billTranTypeCode\":\"AllocationOut\",\"billTranTypeName\":\"调拨出库\",\"storageId\":\"28332dbd-b2d2-4b1f-bc71-3c3c665c658f\",\"storageCode\":\"110102\",\"storageName\":\"知识卡仓\",\"ifSlotManage\":null,\"inStorageId\":\"0iBm0HSL0DzMt3O1Ivs9\",\"inStorageCode\":\"121007\",\"inStorageName\":\"高新咖啡店\",\"inIfSlotManage\":null,\"storekeeperId\":null,\"storekeeperCode\":null,\"storekeeperName\":null,\"planSendDate\":null,\"planArriveDate\":null,\"currencyId\":null,\"currencyCode\":null,\"currencyName\":null,\"totalShouldOutNum\":1.00000000,\"totalFactOutNum\":1.00000000,\"billStatusId\":\"099aj5df-4y42-4k00-d8d0-3714fdb43e6k\",\"billStatusCode\":\"02\",\"billStatusName\":\"已签字\",\"stockBillBelong\":\"0NfjSVvc0jVxlBNvSScj\",\"customerId\":null,\"customerCode\":null,\"customerName\":null,\"bizPersonId\":null,\"bizPersonCode\":null,\"bizPersonName\":null,\"deparmentId\":\"0WQbT14w7gylOnPhY2eT\",\"deparmentCode\":\"FCDEPT01\",\"deparmentName\":\"形态转换部门01\",\"logisticsId\":null,\"logisticsCode\":null,\"logisticsName\":null,\"realLogisticsCompanyId\":null,\"realLogisticsCompanyCode\":null,\"realLogisticsCompanyName\":null,\"logisticsBillCode\":null,\"siger\":\"tmq\",\"signTime\":1587882709000,\"cancelReason\":null,\"remark\":null,\"transferBillOutItems\":[{\"id\":\"0XGKeUIfxCyfIAyiaaJ3\",\"dr\":0,\"ts\":1587882693000,\"creator\":\"tmq\",\"creationTime\":1587882693000,\"modifier\":null,\"modifiedTime\":null,\"persistStatus\":\"nrm\",\"promptMessage\":null,\"transferOutBillId\":\"09hvzd0ZYcNlm2Acrklt\",\"rowNum\":10,\"goodsId\":\"1b6fd0b2-c2c7-490a-9a6e-4404028bb50e\",\"goodsCode\":\"344030000001\",\"goodsName\":\"喜马拉雅财经创业知识通兑卡（9选1）\",\"goodsDisplayName\":\"喜马拉雅财经创业知识通兑卡（9选1）\",\"goodsBasicUnitName\":\"张\",\"goodsAssistUnitName\":\"张\",\"goodsConversionRate\":1.000000,\"enableBatchNumberManage\":null,\"productId\":null,\"productCode\":null,\"productLineId\":null,\"isOptional\":null,\"unitId\":\"cc7d062c-53ad-4ab2-9fe6-63ef173f0a00\",\"unitCode\":\"003\",\"unitName\":\"张\",\"shouldOutNum\":1.00000000,\"factOutNum\":1.00000000,\"unitPrice\":20.00000000,\"amountMoney\":20.00000000,\"batchNumId\":null,\"batchNumCode\":null,\"batchNumName\":null,\"goodsPositionId\":null,\"goodsPositionCode\":null,\"goodsPositionName\":null,\"stockOutPersonId\":null,\"stockOutPersonCode\":null,\"stockOutPersonName\":null,\"stockOutDate\":null,\"receiverAddress\":null,\"provinceId\":null,\"provinceCode\":null,\"provinceName\":null,\"cityId\":null,\"cityCode\":null,\"cityName\":null,\"countyId\":null,\"countyCode\":null,\"countyName\":null,\"townId\":null,\"townCode\":null,\"townName\":null,\"detailAddr\":null,\"receiver\":null,\"receiverPhone\":null,\"receiverPhoneSpare\":null,\"firstBillCode\":\"DBO20200426000005\",\"firstBillBcode\":\"0pVyy865O7Ogtc0YnSjh\",\"firstBillType\":\"Allocation\",\"srcBillCode\":\"DBO20200426000005\",\"srcBillBcode\":\"0pVyy865O7Ogtc0YnSjh\",\"srcBillType\":\"Allocation\",\"remark\":null,\"goodsVersion\":\"1\",\"goodsSelection\":null,\"isMotherPiece\":null,\"customerId\":null,\"customerCode\":null,\"customerName\":null,\"supplierId\":null,\"supplierCode\":null,\"supplierName\":null,\"projectId\":null,\"projectCode\":null,\"projectName\":null,\"batchCodeId\":null,\"batchCodeCode\":null,\"stockStateId\":null,\"stockStateCode\":null,\"stockStateName\":null,\"enableBatchNoManage\":null,\"enableInvStatusManage\":null,\"originalGoodsId\":null,\"goodsSelectionDescription\":null,\"ext01\":\"1.00000000\",\"ext02\":null,\"ext03\":\"COO7-Cxx-03\",\"ext04\":\"COO7-Cxx-03\",\"ext05\":null,\"ext06\":null,\"ext07\":null,\"ext08\":null,\"ext09\":null,\"ext10\":null,\"ext11\":null,\"ext12\":null,\"ext13\":null,\"ext14\":null,\"ext15\":null,\"outStorageId\":null,\"outStorageCode\":null,\"outStorageName\":null,\"outIfSlotManage\":null,\"inStorageId\":null,\"inStorageCode\":null,\"inStorageName\":null,\"inIfSlotManage\":null}],\"transferOutBillItemBoms\":[{\"id\":\"0P2eVkhQHqVyzLrCQZvI\",\"dr\":0,\"ts\":1587882693000,\"creator\":\"tmq\",\"creationTime\":1587882693000,\"modifier\":null,\"modifiedTime\":null,\"persistStatus\":\"nrm\",\"promptMessage\":null,\"rowNum\":\"10\",\"goodsId\":\"1b6fd0b2-c2c7-490a-9a6e-4404028bb50e\",\"goodsCode\":\"344030000001\",\"goodsName\":\"喜马拉雅财经创业知识通兑卡（9选1）\",\"goodsDisplayName\":\"喜马拉雅财经创业知识通兑卡（9选1）\",\"goodsBasicUnitName\":\"张\",\"goodsAssistUnitName\":\"张\",\"goodsConversionRate\":1.000000,\"enableBatchNumberManage\":null,\"productId\":null,\"productLineId\":null,\"unitId\":\"cc7d062c-53ad-4ab2-9fe6-63ef173f0a00\",\"unitCode\":\"003\",\"unitName\":\"张\",\"shouldOutNum\":1.00000000,\"factOutNum\":1.00000000,\"unitPrice\":20.00000000,\"amountMoney\":20.00000000,\"batchNumId\":null,\"batchNumCode\":null,\"batchNumName\":null,\"goodsPositionId\":null,\"goodsPositionCode\":null,\"goodsPositionName\":null,\"stockOutPersonId\":null,\"stockOutPersonCode\":null,\"stockOutPersonName\":null,\"stockOutDate\":null,\"receiverAddress\":null,\"provinceId\":null,\"provinceCode\":null,\"provinceName\":null,\"cityId\":null,\"cityCode\":null,\"cityName\":null,\"countyId\":null,\"countyCode\":null,\"countyName\":null,\"townId\":null,\"townCode\":null,\"townName\":null,\"detailAddr\":null,\"receiver\":null,\"receiverPhone\":null,\"receiverPhoneSpare\":null,\"firstBillCode\":\"0NfjSVvc0jVxlBNvSScj\",\"firstBillBcode\":\"0pVyy865O7Ogtc0YnSjh\",\"firstBillType\":\"Allocation\",\"srcBillCode\":\"DBO20200426000005\",\"srcBillBcode\":\"0pVyy865O7Ogtc0YnSjh\",\"srcBillType\":\"Allocation\",\"remark\":null,\"goodsVersion\":\"1\",\"goodsSelection\":null,\"customerId\":null,\"customerCode\":null,\"customerName\":null,\"supplierId\":null,\"supplierCode\":null,\"supplierName\":null,\"projectId\":null,\"projectCode\":null,\"projectName\":null,\"batchCodeId\":null,\"batchCodeCode\":null,\"stockStateId\":null,\"stockStateCode\":null,\"stockStateName\":null,\"originalGoodsId\":null,\"goodsSelectionDescription\":null,\"itemId\":\"0XGKeUIfxCyfIAyiaaJ3\",\"billId\":null,\"parentGoodsId\":\"1b6fd0b2-c2c7-490a-9a6e-4404028bb50e\",\"parentGoodsCode\":\"344030000001\",\"parentGoodsName\":\"喜马拉雅财经创业知识通兑卡（9选1）\",\"parentGoodsdisplayName\":null,\"parentRowNum\":\"10\",\"childGoodsQty\":null,\"firstBillBomCode\":\"0T4TSD2BkEYNkAawoFlN\",\"srcBillBomCode\":\"0T4TSD2BkEYNkAawoFlN\",\"ext01\":null,\"ext02\":null,\"ext03\":null,\"ext04\":null,\"ext05\":null,\"ext06\":null,\"ext07\":null,\"ext08\":null,\"ext09\":null,\"ext10\":null,\"ext11\":null,\"ext12\":null,\"ext13\":null,\"ext14\":null,\"ext15\":null}],\"srcSystem\":null,\"srcSystemId\":null,\"srcSystemCode\":null,\"srcSystemName\":null,\"ext01\":null,\"ext02\":null,\"ext03\":null,\"ext04\":null,\"ext05\":null,\"ext06\":null,\"ext07\":null,\"ext08\":null,\"ext09\":null,\"ext10\":null,\"ext11\":null,\"ext12\":null,\"ext13\":null,\"ext14\":null,\"ext15\":null,\"sycnOutStatus\":null,\"sycnNCStatus\":null}', 'User': 'Manager', 'DependCase': 'create_transfer-out-bills', 'RelevanceList': '{\"id\":\"$..id\"}', 'Sql': '', 'IsDepend': ''}"}], "start": 1589351935523, "stop": 1589351946922, "uuid": "ea1151e1-f029-4706-ab3e-a8cf216951b9", "historyId": "eefd906d21114be63c81ef46335e3f92", "testCaseId": "a7532dad0b171d55a5c81c01d5f070e2", "fullName": "case.test_allocation.TestCase#test_api", "labels": [{"name": "feature", "value": "渠道云接口自动化测试"}, {"name": "story", "value": "调拨模块测试"}, {"name": "parentSuite", "value": "case"}, {"name": "suite", "value": "test_allocation"}, {"name": "subSuite", "value": "TestCase"}, {"name": "host", "value": "xmlydeMacBook-Pro.local"}, {"name": "thread", "value": "49281-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "case.test_allocation"}]}